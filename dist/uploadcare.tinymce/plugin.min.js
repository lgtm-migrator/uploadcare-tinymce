!function(){"use strict";var e,a={integration:(e=tinymce.majorVersion+"."+tinymce.minorVersion,"TinyMCE/{tinymceVersion}; Uploadcare-TinyMCE/{pluginVerion}".replace("{tinymceVersion}",e).replace("{pluginVerion}","3.2.2")),crop:""};function t(){return parseInt(tinymce.majorVersion)}tinymce.create("tinymce.plugins.UploadcarePlugin",{init:function(r,e){tinymce.ScriptLoader.add("https://ucarecdn.com/widget/3.x/uploadcare/uploadcare.full.min.js"),tinymce.ScriptLoader.loadQueue();var o=Object.keys(r.settings).filter(function(e){return-1!==e.search("^uploadcare_")}).reduce(function(e,n){return e[n.replace("uploadcare_","").replace(/(_[a-z])/g,function(e){return e.toUpperCase()}).replace("_","")]=r.settings[n],e},a);function n(){var e=o.cdnBase||uploadcare.defaults.cdnBase,n=null,a=r.selection.getNode();"IMG"===a.nodeName&&0===a.src.indexOf(e)&&(n=uploadcare.fileFrom("uploaded",a.src,o)),"A"===a.nodeName&&0===a.href.indexOf(e)&&(n=uploadcare.fileFrom("uploaded",a.href,o)),uploadcare.openDialog(n,o).done(function(e){e.done(function(e){e.isImage?r.selection.setNode(tinymce.activeEditor.dom.create("img",{src:e.cdnUrl})):"A"===a.nodeName?a.parentNode.replaceChild(tinymce.activeEditor.dom.create("a",{href:e.cdnUrl},e.name),a):r.selection.setNode(tinymce.activeEditor.dom.create("a",{href:e.cdnUrl},e.name))})})}4===t()?(r.addCommand("showUploadcareDialog",n),r.addButton("uploadcare",{title:"Insert media",cmd:"showUploadcareDialog",image:e+"/icons/uploadcare.png",stateSelector:"img"})):5===t()&&(r.ui.registry.addIcon("uploadcare",'\n<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 80 80">\n  <path fill="#FFD800" fill-rule="evenodd" d="M32,64 C14.326888,64 0,49.673112 0,32 C0,14.326888 14.326888,0 32,0 C49.673112,0 64,14.326888 64,32 C64,49.673112 49.673112,64 32,64 Z M32,34.7654321 C33.527306,34.7654321 34.7654321,33.527306 34.7654321,32 C34.7654321,30.472694 33.527306,29.2345679 32,29.2345679 C30.472694,29.2345679 29.2345679,30.472694 29.2345679,32 C29.2345679,33.527306 30.472694,34.7654321 32,34.7654321 Z" transform="translate(8 8)"/>\n</svg>\n'),r.ui.registry.addButton("uploadcare",{text:"Insert media",tooltip:"Insert media",onAction:n,icon:"uploadcare"}))},createControl:function(){return null},getInfo:function(){return{longname:"Uploadcare",author:"Uploadcare",authorurl:"https://uploadcare.com/",infourl:"https://github.com/uploadcare/uploadcare-tinymce",version:"3.2.2"}}}),tinymce.PluginManager.add("uploadcare",tinymce.plugins.UploadcarePlugin)}();
